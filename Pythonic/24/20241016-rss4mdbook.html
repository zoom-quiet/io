<!DOCTYPE HTML>
<html lang="zh" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>10.16 RSS4mdBook - ZoomQuiet.io</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="../../favicon.svg">
                        <link rel="shortcut icon" href="../../favicon.png">
                <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="../../fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
                <link rel="stylesheet" href="../../theme/pagetoc.css">
        
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../index.html">首页</a></li><li class="spacer"></li><li class="chapter-item expanded "><a href="../../zoomquiet.html">大妈</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../hello-world.html">你好</a></li><li class="chapter-item "><a href="../../linking.html">链接</a></li></ol></li><li class="chapter-item expanded "><a href="../../ANN/index.html">公告</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../ANN/20200223-ZoomQuiet42-ANN-0-aaaagin.html">叕..重新开始</a></li><li class="chapter-item "><a href="../../ANN/20200302-ZQ42-ANN-NINAN.html">呢喃</a></li><li class="chapter-item "><a href="../../ANN/20200222-ZQ42-ANN-historic.html">钩陈</a></li><li class="chapter-item "><a href="../../ANN/20200222-ZQ42-ANN-IMHO.html">拙见</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../ANN/pressone.html">PRESSone</a></li></ol></li></ol></li><li class="chapter-item expanded "><li class="part-title">随想🌚🌘🌗🌖🌝</li><li class="spacer"></li><li class="chapter-item expanded "><a href="../../IMHO/index.html">恕直</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../IMHO/DevOps/index.html">DevOps</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../IMHO/DevOps/20241009-deLark.html">别了Lark</a></li></ol></li><li class="chapter-item "><a href="../../IMHO/FLOSS/index.html">FLOSS</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../IMHO/FLOSS/20140317-ac1024-tech-community4chinese.html">中国技术社区研究/</a></li><li class="chapter-item "><a href="../../IMHO/FLOSS/20140220-ac1-zq.html">什么是社区?</a></li><li class="chapter-item "><a href="../../IMHO/FLOSS/20140227-ac2-tech-community.html">什么是技术社区?</a></li><li class="chapter-item "><a href="../../IMHO/FLOSS/20141215-ac20-need-what.html">社区需要什么?</a></li></ol></li><li class="chapter-item "><a href="../../IMHO/IAS/index.html">睡后收入</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../IMHO/IAS/20241028-iff-write.html">咩是写作?</a></li><li class="chapter-item "><a href="../../IMHO/IAS/20241026-jy-framwork.html">开源保险社区?</a></li></ol></li><li class="chapter-item "><a href="../../IMHO/20240704-aigcxzh-genai101.html">AIGCx征文:俺这样用GenAI</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../IMHO/20240717-aigcxzh-genai102.html">《我这样用GenAI》重构</a></li></ol></li><li class="chapter-item "><a href="../../IMHO/19980101-chinese4internet.html">1998:探讨 信息化社会中 中国传统思想的作用</a></li></ol></li><li class="chapter-item expanded "><a href="../../MurMur/index.html">呢喃</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../MurMur/24/index.html">2024</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../MurMur/24/20241028.html">10.28 为咩阅后即焚</a></li><li class="chapter-item "><a href="../../MurMur/24/20241024.html">10.24 深挖开源...</a></li><li class="chapter-item "><a href="../../MurMur/24/20241023.html">10.23 BTC电热炉</a></li><li class="chapter-item "><a href="../../MurMur/24/20241020.html">10.20 memecoin?</a></li><li class="chapter-item "><a href="../../MurMur/24/20241014.html">10.14 为毛Python?</a></li><li class="chapter-item "><a href="../../MurMur/24/20240929.html">9.29 自我纠错?</a></li><li class="chapter-item "><a href="../../MurMur/24/20240924.html">9.24 随心所欲?</a></li><li class="chapter-item "><a href="../../MurMur/24/20240914.html">9.14 AI时代的学习</a></li><li class="chapter-item "><a href="../../MurMur/24/20240912.html">9.12 「开发者关系」</a></li><li class="chapter-item "><a href="../../MurMur/24/20240911.html">9.11 「社畜指标」</a></li><li class="chapter-item "><a href="../../MurMur/24/20240904.html">9.4 「人体电池」</a></li><li class="chapter-item "><a href="../../MurMur/24/20240903.html">9.3 枪包带</a></li><li class="chapter-item "><a href="../../MurMur/24/20240730.html">7.30 人类发展?</a></li><li class="chapter-item "><a href="../../MurMur/24/20240727.html">7.27 高维撕裂</a></li><li class="chapter-item "><a href="../../MurMur/24/20240725.html">7.25 AI和教育产业</a></li><li class="chapter-item "><a href="../../MurMur/24/20240723.html">7.23 和高手差距..</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../MurMur/24/20240723+1.html">+1 开源安全AI?</a></li></ol></li><li class="chapter-item "><a href="../../MurMur/24/20240722.html">7.22 自由?</a></li><li class="chapter-item "><a href="../../MurMur/24/20240718.html">7.18 利他</a></li><li class="chapter-item "><a href="../../MurMur/24/20240717.html">7.17「抓娃娃」算了吧</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../MurMur/24/20240717-1.html">+1苹果和BSD</a></li></ol></li></ol></li><li class="chapter-item "><a href="../../MurMur/23/index.html">2023</a></li><li class="chapter-item "><a href="../../MurMur/22/index.html">2022</a></li><li class="chapter-item "><a href="../../MurMur/21/index.html">2021</a></li><li class="chapter-item "><a href="../../MurMur/20/index.html">2020</a></li><li class="chapter-item "><a href="../../MurMur/20141223-zoomquiet4KO.html">KnewOne-talk之大妈篇</a></li><li class="chapter-item "><a href="../../MurMur/19961111-CIPHER.html">CIPHER</a></li></ol></li><li class="chapter-item expanded "><a href="../../OldTouch/index.html">钩陈</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../OldTouch/2024/index.html">2024</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../OldTouch/24/20241011-funny-court.html">10.11 友好的法院?</a></li></ol></li><li class="chapter-item "><a href="../../OldTouch/20131219-jekyll2pelican.html">Jekyll 转进 Pelican</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">折腾🌚🌘🌗🌖🌝</li><li class="spacer"></li><li class="chapter-item expanded "><a href="../../Pythonic/index.html">蟒样</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Pythonic/24/index.html">2024</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Pythonic/24/20241028-loc-host-s3.html">10.28 自持图床</a></li><li class="chapter-item "><a href="../../Pythonic/24/20241016-dvd_subtitle.html">10.18 dvd_subtitle</a></li><li class="chapter-item expanded "><a href="../../Pythonic/24/20241016-rss4mdbook.html" class="active">10.16 RSS4mdBook</a></li><li class="chapter-item "><a href="../../Pythonic/24/20241015-rss-app-x.html">10.15 RSS4X</a></li><li class="chapter-item "><a href="../../Pythonic/24/20241014-cf-pages.html">10.14 迁移 gh-pages 到 Cloudflare</a></li><li class="chapter-item "><a href="../../Pythonic/24/20241011-mov-sub.html">10.11 电影字幕</a></li></ol></li><li class="chapter-item "><a href="../../Pythonic/weekly/index.html">周刊</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Pythonic/weekly/24/index.html">2024</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Pythonic/weekly/24/20241028-43.html">蟒周刊:24-43</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20241020-42.html">蟒周刊:24-42</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20241014-41.html">蟒周刊:24-41</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20241006-40.html">蟒周刊:24-40</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240929-39.html">蟒周刊:24-39</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240922-38.html">蟒周刊:24-38</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240915-37.html">蟒周刊:24-37</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240908-36.html">蟒周刊:24-36</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240901-35.html">蟒周刊:24-35</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240825-34.html">蟒周刊:24-34</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240818-33.html">蟒周刊:24-33</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240811-32.html">蟒周刊:24-32</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240804-31.html">蟒周刊:24-31</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240728-30.html">蟒周刊:24-30</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240721-29.html">蟒周刊:24-29</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240714-28.html">蟒周刊:24-28</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240707-27.html">蟒周刊:24-27</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240630-26.html">蟒周刊:24-26</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240623-25.html">蟒周刊:24-25</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240616-24.html">蟒周刊:24-24</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240609-23.html">蟒周刊:24-23</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240602-22.html">蟒周刊:24-22</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240526-21.html">蟒周刊:24-21</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240519-20.html">蟒周刊:24-20</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240512-19.html">蟒周刊:24-19</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240505-18.html">蟒周刊:24-18</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240428-17.html">蟒周刊:24-17</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240421-16.html">蟒周刊:24-16</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240414-15.html">蟒周刊:24-15</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240407-14.html">蟒周刊:24-14</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240331-13.html">蟒周刊:24-13</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240324-12.html">蟒周刊:24-12</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240317-11.html">蟒周刊:24-11</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240310-10.html">蟒周刊:24-10</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240303-09.html">蟒周刊:24-09</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240225-08.html">蟒周刊:24-08</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240218-07.html">蟒周刊:24-07</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240211-06.html">蟒周刊:24-06</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240204-05.html">蟒周刊:24-05</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240128-04.html">蟒周刊:24-04</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240121-03.html">蟒周刊:24-03</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240114-02.html">蟒周刊:24-02</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/24/20240107-01.html">蟒周刊:24-01</a></li></ol></li><li class="chapter-item "><a href="../../Pythonic/weekly/23/index.html">2023</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Pythonic/weekly/23/20231231-52.html">蟒周刊:23-52</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/23/20231224-51.html">蟒周刊:23-51</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/23/20231217-50.html">蟒周刊:23-50</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/23/20231210-49.html">蟒周刊:23-49</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/23/20231203-48.html">蟒周刊:23-48</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/23/20231126-47.html">蟒周刊:23-47</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/23/20231119-46.html">蟒周刊:23-46</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/23/20231111-45.html">蟒周刊:23-45</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/23/20231105-44.html">蟒周刊:23-44</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/23/20231029-43.html">蟒周刊:23-43</a></li><li class="chapter-item "><a href="../../Pythonic/weekly/23/20231022-42.html">蟒周刊:23-42</a></li><li class="spacer"></li></ol></li></ol></li></ol></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">ZoomQuiet.io</h1>

                    <div class="right-buttons">
                                                                        <a href="https://github.com/zoom-quiet/io" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                                                
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>

                        <h1 id="如何给-mdbook-挂上-rss"><a class="header" href="#如何给-mdbook-挂上-rss">如何给 mdBook 挂上 RSS?</a></h1>
<blockquote>
<p>Rust 开发的 SSG 引擎...</p>
</blockquote>
<h2 id="background"><a class="header" href="#background">background</a></h2>
<p>经网友支持, 开通了 <a href="https://follow.is/#features">Follow</a>,
然后, 就遇到第一个问题:</p>
<p><a href="https://zoomquiet.io/">ZoomQuiet.io</a></p>
<p>第 N 次重构的私人网站,
由 <a href="https://rust-lang.github.io/mdBook/index.html">mdBook</a>
生成, 并没有 RSS 源提供给 Follow 哪...</p>
<h2 id="goal"><a class="header" href="#goal">goal</a></h2>
<ul>
<li>简洁, 快速的追加 RSS.xml 给 mdBook 生成的网站</li>
<li>可以追加到 gh-actions 中, 以便其它人协作时, 不用折腾本地环境</li>
</ul>
<h2 id="logging"><a class="header" href="#logging">logging</a></h2>
<h3 id="rss4mdbookrs"><a class="header" href="#rss4mdbookrs">rss4mdbook.rs</a></h3>
<blockquote>
<p>其实原先解决过这个问题的</p>
</blockquote>
<p>mdBook 是 Rust 社区进行文档组织发布的标准选择,
其地位等于 Python 社区中:</p>
<ul>
<li>Markdown 发明之前的 <a href="https://www.sphinx-doc.org/en/master/examples.html">Sphinx</a></li>
<li>Markdown 发明之后的 <a href="https://www.mkdocs.org/getting-started/">GettMkDocs</a></li>
</ul>
<p>相比其它 <a href="https://www.cloudflare.com/zh-cn/learning/performance/static-site-generator/">SSG/静态站点生成器</a>
这类生成器, 最大的好处就在:</p>
<ul>
<li>不像 Jekyll 之类, 要求在所有 Markdown 文章的顶部, 必须提供一组 meta 信息
<ul>
<li>以便 SSG 解析使用</li>
<li>而这些文本和内容无关, 完全是面向编译器工具的</li>
<li>非常分散注意力, 也破坏了 Markdown 文本的纯粹性</li>
</ul>
</li>
<li>而是, 约定将 .md 文件放在哪个指定目录中就好
<ul>
<li>SSG 引擎将自动扫描并根据内置规则, 完成良好的编译和发布</li>
</ul>
</li>
</ul>
<p>而 mdBook 是由 Rust 开发的,
其网页生成速度是所有 SSG 中最快的;</p>
<p>当初就是为了学习 Rust 而专门安装使用过 mdBook 来发布相关学习笔记:</p>
<ul>
<li><a href="https://weekly.rs.101.so/">锈&lt;周刊::2024&gt; - 锈周刊 -&gt; Weekly :: China<Rustaceans></a></li>
<li><a href="https://rs.101.so/">成为 Rustacean - be Rustaceans</a></li>
</ul>
<p>当然也发现没有 RSS 生成的问题, 也顺手用 Rust 来编写工具解决:</p>
<ul>
<li><a href="https://crates.io/crates/rss4mdbook">rss4mdbook - crates.io: Rust Package Registry</a></li>
<li>在本地也组织有 <code>pub.sh</code> 来自动完成网站编译,扫描生成RSS,注入,并提交发布</li>
<li>问题在:
<ul>
<li>用 Rust 完成, 本地安装编译, 有点儿复杂, 其它人难以使用</li>
<li>用 Rust 编写, 如果有什么功能变化, 修改也比较困难</li>
<li>而且, 使用这个工具, 暂时只能完全在本地配置好执行环境, 然后使用发布脚本来完成, 如果本地环境因为各种环境失效, 自己也无法简单的立即恢复 RSS 生成.</li>
</ul>
</li>
</ul>
<h3 id="gh-actions"><a class="header" href="#gh-actions">gh-actions</a></h3>
<blockquote>
<p>GitHub 这么良心的提供了免费微服务渠道, 必须得大力薅</p>
</blockquote>
<p>和 GPT 们合作, 快速撸了个脚本: <a href="https://github.com/zoom-quiet/io/blob/main/tasks.py">tasks.py</a></p>
<ul>
<li>使用 Invoke 作为 CLI 指令框架</li>
<li>调用 <code>inv gen</code> 指令自动完成:
<ul>
<li>读取 <code>SUMMARY.md</code> 网站总索引文件</li>
<li>逐一拼装文件路径, 读取所有应该发布的 .md 文件内容</li>
<li>使用 markdown 模块编译为 html , 作为文章内容编组为 RSS 的条目信息</li>
<li>再根据所有文件的系统属性, 以更新时间排序, 只发布最新 14 个文章</li>
<li>最终将所有合理的内容, 输出为 <code>rss.xml</code> 文档</li>
</ul>
</li>
</ul>
<p>接下来, 重构 GitHub 仓库中的 <code>.github/workflow</code> 目录里的 Actions 脚本,
才发现又一坑:</p>
<ul>
<li>原先是分为 <code>build.yaml</code> 以及 <code>pages.yaml</code> 两个构建脚本的</li>
<li>通过 <code>dawidd6/action-download-artifact@v3</code> 这种中间行为进行成果交互</li>
</ul>
<pre><code class="language-yaml">...
      - name: Download artifact
        id: download-artifact
        uses: dawidd6/action-download-artifact@v3
        with:
          name: book-and-rss
          path: book/
          workflow: build.yml
</code></pre>
<p>想在 <code>mdbook</code> 指令之后, 追加 <code>inv</code> 指令还好说,
但是, 如何将生成的 <code>rss.xml</code> 文件也合理的传递到 <code>pages.yaml</code> 的行为流中,
完全出乎意料;</p>
<p>质问了 GPT 们很久, 也无法在 gh-actions 中看到流畅的交接过程;</p>
<h3 id="cf-pages"><a class="header" href="#cf-pages">CF-Pages</a></h3>
<blockquote>
<p>是的, 互联网菩萨 Cloudflare 也有 Pages 服务, 而且简洁无比, 值得上</p>
</blockquote>
<p>结合之前的折腾 <strong>&quot;<a href="241014-cf-pages.html">迁移 gh-pages 到 Cloudflare</a>&quot;</strong> 经验,
也使用 <code>gh-pages</code> 分支, 作为工作成果的中间缓存区,
再配置 <code>CF-Pages</code> 服务, 对应复制发布就好, 不用在 Cloudflare 端在进行任何编译工作;</p>
<p>进一步的经验:</p>
<ul>
<li>gh-actions 的 workflow 机制还远没成熟</li>
<li>不同的文件, 代表要拉起不同的虚拟机, 不同 Docker 之间的文件传递, 涉及太多安全问题, 远没那么简洁可以配置明白</li>
<li>所以, 能不拆分, 就别折腾</li>
<li>将编译和发布(其实就是推送到指定仓库分支中)行为,在一个 <code>.yaml</code> 文件中完成即可</li>
</ul>
<p>参考: <a href="https://github.com/zoom-quiet/io/blob/main/.github/workflows/build-and-deploy.yml">build-and-deploy.yml</a></p>
<p>实用技巧只有:</p>
<pre><code class="language-yaml">...
      # Step 6: Check and prepare files for deployment
      - name: Prepare deployment files
        run: |
          echo &quot;Listing generated files in book/&quot;
          ls -al book/
          echo &quot;Copy RSS and other files to book directory&quot;
          cp -v rss.xml book/
          cp -v CNAME book/
          cp -v .nojekyll book/
          mv -v book ../

      # Step 7: Checkout the gh-pages branch
      - name: Checkout gh-pages branch
        uses: actions/checkout@v4
        with:
          ref: gh-pages

      # Step 8: Deploy to gh-pages branch
      - name: Deploy to gh-pages
        run: |
          rm -rfv *
          cp -rv ../book/* .
          ls -al ./
          git config --local user.name &quot;github-actions[bot]&quot;
...
          git push origin gh-pages
</code></pre>
<ul>
<li>通过 <code>ls -al book/</code> 这种列显指令, 可以在 Actions 日志中, 看到阶段成果, 以便确认调试进展</li>
<li>通过 <code>cp -v rss.xml book/</code> 之类的指令, 将需要注入到目标静态网站目录中的额外文件都事先复制进去</li>
<li>然后, 将 <code>book</code> 这种经济计划成果目录, 直接移动到工作目录, 也就是微服务中的仓库复本目录
<ul>
<li>再切换分支, 这样不会引发冲突</li>
<li>现在, 清除所有文件</li>
<li>最后, 从移到外层目录的成果目录中, 复制所有文件进来</li>
<li>完成完备的更新</li>
<li>现在进行标准的 git 提交+推送 行为就完成了自动编译</li>
</ul>
</li>
<li>这时, <code>CF-Pages</code> 就会被触发, 自动同步 <code>gh-pages</code> 分支中的所有文件,并发布到约定域名中;
<ul>
<li>是的 Cloudflare 本身也有 DNS 服务功能</li>
<li>就不用像 GitHub 那样用 <code>CNAME</code> 之类的交接文案来驱动后端其它服务进行域名绑定</li>
<li>而是直接在控制界面中简单的说明, Cloudflare 就将自动生成配置, 完成检验, 并上线最新域名解析</li>
</ul>
</li>
</ul>
<h3 id="发布-rss"><a class="header" href="#发布-rss">发布 RSS</a></h3>
<p>最后的最后, 别忘记发布 <code>rss.xml</code> 到网站界面中;
俺是修改 <code>index.hbs</code> 模板文件,追加个标准 HTML 链接:</p>
<pre><code> &lt;a href=&quot;/rss.xml&quot;&gt;&lt;b&gt;RSS&lt;/b&gt;
</code></pre>
<p>以便让自己以及各种工具知道网站拥有 RSS 源;</p>
<h2 id="refer"><a class="header" href="#refer">refer.</a></h2>
<p><a href="https://follow.is/#features">Follow</a></p>
<ul>
<li><a href="https://sspai.com/post/91283">使用 follow 重塑我的信息输入系统 - 少数派</a></li>
<li><a href="https://github.com/rust-lang/mdBook">rust-lang/mdBook: Create book from markdown files. Like Gitbook but implemented in Rust</a>
<ul>
<li><a href="https://crates.io/crates/rss4mdbook">rss4mdbook - crates.io: Rust Package Registry</a></li>
</ul>
</li>
<li><a href="https://www.sphinx-doc.org/en/master/examples.html">Sphinx — Sphinx documentation</a></li>
<li><a href="https://www.mkdocs.org/getting-started/">Getting Started - MkDocs</a></li>
</ul>
<h2 id="tracing"><a class="header" href="#tracing">tracing</a></h2>
<ul>
<li>241025 DAMA 观察了各种 SSG 引擎,以及自己积累的各种文件形式,
<ul>
<li>增补代码, 以 .md 文件前缀约定为发布日期:</li>
<li><code>YYYYmmdd-</code> 为统一前缀</li>
<li>如果没有这种前缀, 就不收录入 RSS</li>
<li>进行的, 也根据这一字串转换为时间对象, 并进行倒排, 只发布最新的几篇...</li>
</ul>
</li>
<li>241018 DAMA .init</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="../../Pythonic/24/20241016-dvd_subtitle.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                                                    <a rel="next" href="../../Pythonic/24/20241015-rss-app-x.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                                    <a rel="prev" href="../../Pythonic/24/20241016-dvd_subtitle.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                                    <a rel="next" href="../../Pythonic/24/20241015-rss-app-x.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
                <script src="../../ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../editor.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mode-rust.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../theme-dawn.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>
        
                <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
                <script type="text/javascript" src="../../theme/pagetoc.js"></script>
        
        


    <hr />

    <p style="text-align:center">

        <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="知识共享许可协议"
                style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a>
        本作品采用<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">知识共享署名-相同方式共享 4.0 国际许可协议</a>进行许可;-)
|| <a href="/rss.xml"><b>RSS</b></a>
    </p>

    <hr />

<script src="https://utteranc.es/client.js"
        repo="zoom-quiet/comments"
        issue-term="url"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>




    </body>
</html>
